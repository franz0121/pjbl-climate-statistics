import{r as b,j as e}from"./vendor_react-DCpd0Dq0.js";import{ay as F,az as g,aA as ns,aB as ls,aC as cs,ak as te,e as rs,f as V,al as W,aD as os,aE as Te,i as $e,h as Ee,j as Fe,k as Ve,l as ge,aF as ds,m as We,aG as z,aH as G,aI as M,N as hs,O as ms,U as us,V as ps,a0 as xs,a1 as js,$ as Me,W as Ue,X as Be,Y as vs,Z as qe,_ as ys,ae as bs,af as Ye,ag as gs,ah as fs,ai as Qe,aj as Ns}from"./page-portals-StudentPortal-vW29d4If.js";import{c as fe}from"./page-student_sections-Lesson1-3Dw45y3M.js";const ws=()=>Array.from({length:15},()=>""),ks=({classes:_})=>{const[A,U]=b.useState("pre"),[u,x]=b.useState("all"),[k,ae]=b.useState("phase1"),[f,R]=b.useState("a1"),[B,de]=b.useState("act1"),[Ne,Je]=b.useState(""),[we,He]=b.useState(""),[Ce,ze]=b.useState(""),[q,he]=b.useState("act1"),[T,me]=b.useState(""),[ie,Se]=b.useState({}),[$,ne]=b.useState("phase1"),[D,Y]=b.useState("a1a"),[I,K]=b.useState("a1"),[P,ue]=b.useState(""),[pe,Ge]=b.useState(""),[le,Ae]=b.useState("a1"),[ce,ke]=b.useState(""),[De,Ke]=b.useState("a1"),[L,Xe]=b.useState(""),[X,Ze]=b.useState(Array(8).fill(1)),[E,re]=b.useState("phase1"),[oe,Pe]=b.useState("activity1"),[Re,es]=b.useState(""),[Q,xe]=b.useState("activity1"),[J,je]=b.useState(""),[Ie,ss]=b.useState(""),[H,ve]=b.useState("act1"),[O,Oe]=b.useState(""),[Z,ts]=b.useState(Array(8).fill(1)),j=b.useMemo(()=>[{id:"all",label:"All Classes"},..._.map(s=>({id:s.id,label:`${s.grade} - ${s.section}`}))],[_]),Le=s=>{if(!s)return"";const t=s.trim().split(/\s+/);if(t.length===0)return"";if(t.length===1)return t[0];const a=t[t.length-1],i=t.slice(0,t.length-1).join(" ");return`${a}, ${i}`},as=({criteria:s,options:t,onRecord:a,studentDisplay:i})=>{const[n,l]=b.useState(Array(s.length).fill(1)),c=["Below Proficient","Proficient","Advanced"],r=m=>m===0?2:m===1?3:4,o=n.reduce((m,h)=>m+r(h),0);return e.jsxs("div",{children:[e.jsxs("table",{className:"scoring-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"left"},children:"Criterion"}),e.jsx("th",{children:"Selection"}),e.jsx("th",{children:"Interpretation"}),e.jsx("th",{children:"Score"})]})}),e.jsxs("tbody",{children:[s.map((m,h)=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:6},children:m}),e.jsx("td",{className:"scoring-select-cell",style:{padding:6},children:e.jsxs("select",{className:"scoring-select",value:n[h],onChange:p=>{const C=Number(p.target.value);l(N=>{const S=N.slice();return S[h]=C,S})},children:[e.jsx("option",{value:0,children:t[h][0]}),e.jsx("option",{value:1,children:t[h][1]}),e.jsx("option",{value:2,children:t[h][2]})]})}),e.jsx("td",{className:"scoring-interpret",style:{padding:6},children:c[n[h]]}),e.jsx("td",{className:"scoring-score",style:{padding:6},children:r(n[h])})]},h)),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:6,fontWeight:800},children:"Total"}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{className:"scoring-score",style:{padding:6,fontWeight:800},children:o})]})]})]}),e.jsxs("div",{style:{marginTop:8,display:"flex",gap:8,alignItems:"center"},children:[e.jsx("button",{onClick:()=>a(n),style:{padding:"8px 12px",borderRadius:6,border:"none",background:"#2f6f5a",color:"#fff"},children:"Record Score"}),e.jsx("div",{style:{marginLeft:8,color:"#374151",fontWeight:700},children:i||""})]})]})},d=b.useMemo(()=>{if(u==="all")return _.flatMap(t=>t.students.map(a=>({...a,classId:t.id})));const s=_.find(t=>t.id===u);return s?s.students.map(t=>({...t,classId:s.id})):[]},[_,u]),is=JSON.stringify(F()),w=b.useMemo(()=>{const s=F();return d.map(t=>{const a=s[t.username]||{},i=a.postPart1Responses||a.prePart1Responses||ws(),n=typeof a.postPart1Correct=="number"?a.postPart1Correct:void 0,l=(()=>{try{const c=JSON.parse(localStorage.getItem("teacherFeedback")||"{}")||{},r=c[t.username]&&c[t.username].lesson1&&c[t.username].lesson1.phaseScores?c[t.username].lesson1.phaseScores[4]:void 0;if(typeof r=="number")return r}catch{}try{const r=g()[t.username]?.phaseData?.[4];if(r&&typeof r.teacherScore=="number")return r.teacherScore}catch{}return 0})();return{id:t.id,name:t.name,username:t.username,answers:i,score:typeof n=="number"?n:l}})},[d,is]),v=(s,t="performance.csv")=>{const i=[["Name","Username",...Array.from({length:15},(r,o)=>`Q${o+1}`),"Score"].join(",")];s.forEach(r=>{const o=[r.name,r.username,...r.answers,r.score].map(m=>`"${String(m).replace(/"/g,'""')}"`).join(",");i.push(o)});const n=new Blob([i.join(`
`)],{type:"text/csv"}),l=URL.createObjectURL(n),c=document.createElement("a");c.href=l,c.download=t,c.click(),URL.revokeObjectURL(l)},y=s=>{const t=window.open("","_blank");if(!t)return;const a=`
      <html>
      <head>
        <title>${s}</title>
        <style>
          body { font-family: Arial, Helvetica, sans-serif; padding: 20px; }
          table { border-collapse: collapse; width: 100%; }
          th, td { border: 1px solid #ccc; padding: 6px 8px; font-size: 12px; }
          th { background: #eef6ff; }
        </style>
      </head>
      <body>
        <h2>${s}</h2>
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Username</th>
              ${Array.from({length:15},(i,n)=>`<th>Q${n+1}</th>`).join("")}
              <th>Score</th>
            </tr>
          </thead>
          <tbody>
            ${w.map(i=>`
              <tr>
                <td>${i.name}</td>
                <td>${i.username}</td>
                ${i.answers.map(n=>`<td>${n}</td>`).join("")}
                <td>${i.score}</td>
              </tr>
            `).join(`
`)}
          </tbody>
        </table>
      </body>
      </html>
    `;t.document.write(a),t.document.close(),t.print()};return e.jsxs("div",{className:"performance-page",children:[e.jsx("div",{className:"performance-header",children:e.jsx("h2",{className:"performance-title",children:"Performance Summary"})}),e.jsxs("div",{className:"performance-subtabs",children:[e.jsx("button",{className:`subtab ${A==="pre"?"active":""}`,onClick:()=>U("pre"),children:"Pre-Assessment"}),e.jsx("button",{className:`subtab ${A==="lesson1"?"active":""}`,onClick:()=>U("lesson1"),children:"Lesson 1"}),e.jsx("button",{className:`subtab ${A==="lesson2"?"active":""}`,onClick:()=>U("lesson2"),children:"Lesson 2"}),e.jsx("button",{className:`subtab ${A==="lesson3"?"active":""}`,onClick:()=>U("lesson3"),children:"Lesson 3"}),e.jsx("button",{className:`subtab ${A==="post"?"active":""}`,onClick:()=>U("post"),children:"Post-Assessment"}),e.jsx("button",{className:`subtab ${A==="classRecord"?"active":""}`,onClick:()=>U("classRecord"),children:"Class Record"})]}),e.jsxs("div",{className:"performance-content",children:[A==="pre"&&e.jsxs("div",{className:"subpage",children:[e.jsxs("div",{className:"subpage-header",children:[e.jsx("h3",{className:"subpage-title",children:"Pre-Assessment Results"}),e.jsxs("div",{className:"subpage-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=F(),t=d.map(a=>{const i=s[a.username]||{};return{name:a.name,username:a.username,answers:i.prePart1Responses||Array.from({length:15},()=>""),score:typeof i.prePart1Correct=="number"?i.prePart1Correct:""}});v(t,"pre-assessment.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>{const s=F(),t=d.map(n=>({name:n.name,username:n.username,answers:s[n.username]?.prePart1Responses||Array.from({length:15},()=>""),score:s[n.username]?.prePart1Correct??""})),a=`
                      <html><head><title>Pre-Assessment Results</title></head><body><h2>Pre-Assessment Results</h2><table border="1" cellpadding="6"><thead><tr><th>Name</th><th>Username</th>${Array.from({length:15},(n,l)=>`<th>Q${l+1}</th>`).join("")}<th>Score</th></tr></thead><tbody>${t.map(n=>`<tr><td>${n.name}</td><td>${n.username}</td>${n.answers.map(l=>`<td>${l}</td>`).join("")}<td>${n.score}</td></tr>`).join("")}</tbody></table></body></html>`,i=window.open("","_blank");i&&(i.document.write(a),i.document.close(),i.print())},className:"download-btn",children:"Download PDF"})]})]})]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Username"}),Array.from({length:15},(s,t)=>e.jsxs("th",{children:["Q",t+1]},t)),e.jsx("th",{children:"Score"})]})}),e.jsxs("tbody",{children:[d.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:17,style:{textAlign:"center",padding:"18px"},children:"No students found for selected class."})}),(()=>{const s=F();return d.map(t=>{const a=s[t.username]||{},i=a.prePart1Responses||Array.from({length:15},()=>""),n=typeof a.prePart1Correct=="number"?a.prePart1Correct:"";return e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{children:t.username}),i.map((l,c)=>e.jsx("td",{className:a.prePart1ItemCorrect&&a.prePart1ItemCorrect[c]?"cell-correct":"",children:l},c)),e.jsx("td",{children:n})]},t.id)})})()]})]})})]}),A==="lesson1"&&e.jsxs("div",{className:"subpage",children:[e.jsx("div",{className:"subpage-header",children:e.jsx("h3",{className:"subpage-title",children:"Lesson 1: Climate Correlation Analysis"})}),e.jsxs("div",{className:"lesson-phases",children:[e.jsxs("div",{className:"phase-tabs",children:[e.jsx("button",{className:`phase ${k==="phase1"?"active":""}`,onClick:()=>ae("phase1"),children:"Phase 1: Launch the Investigation"}),e.jsx("button",{className:`phase ${k==="phase2"?"active":""}`,onClick:()=>ae("phase2"),children:"Phase 2: Decode the Data"}),e.jsx("button",{className:`phase ${k==="phase3"?"active":""}`,onClick:()=>ae("phase3"),children:"Phase 3: From Numbers to Action"}),e.jsx("button",{className:`phase ${k==="phase4"?"active":""}`,onClick:()=>ae("phase4"),children:"Phase 4: Share the Story, Reflect on the Journey"})]}),k==="phase1"&&e.jsxs("div",{className:"lesson-layout",children:[e.jsxs("aside",{className:"activity-list",children:[e.jsx("button",{className:`activity ${f==="a1"?"active":""}`,onClick:()=>R("a1"),children:"Activity 1"}),e.jsx("button",{className:`activity ${f==="a2"?"active":""}`,onClick:()=>R("a2"),children:"Activity 2"}),e.jsx("button",{className:`activity ${f==="a3"?"active":""}`,onClick:()=>R("a3"),children:"Activity 3"}),e.jsx("button",{className:`activity ${f==="a4a"?"active":""}`,onClick:()=>R("a4a"),children:"Activity 4a"}),e.jsx("button",{className:`activity ${f==="a4b"?"active":""}`,onClick:()=>R("a4b"),children:"Activity 4b"})]}),e.jsxs("section",{className:"activity-panel",children:[f==="a1"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",children:"Activity 1: Explore the Data"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>v(w),className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 1: Explore the Data"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students explore real climate and environmental data. They use the filter buttons to change what data appears on the bar graph, observe how the values change when you select different options, and take note of patterns, increases, decreases, or anything that catches your attention."]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Timestamp (Mark as Done)"})]})}),e.jsxs("tbody",{children:[d.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:2,style:{textAlign:"center"},children:"No students found."})}),(()=>{const s=g();return d.map(t=>{const a=s?.[t.username]?.phaseData?.[1]?.a1Timestamp||"";let i="";if(a)try{const n=new Date(a),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n.getMonth()],r=String(n.getDate()).padStart(2,"0"),o=n.getFullYear(),m=String(n.getHours()).padStart(2,"0"),h=String(n.getMinutes()).padStart(2,"0"),p=String(n.getSeconds()).padStart(2,"0");i=`${c} ${r}, ${o} - ${m}:${h}:${p}`}catch{i=a}return e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{children:i})]},t.id)})})()]})]})})]}),f==="a2"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",children:"Activity 2: Watch and Check Your Understanding"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>v(w),className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 2: Watch and Check Your Understanding"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students watch an instructional video about Pearson Correlation and answer the checkpoint questions."]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Q1"}),e.jsx("th",{children:"Q2"}),e.jsx("th",{children:"Q3"}),e.jsx("th",{children:"Q4"}),e.jsx("th",{children:"Q5"}),e.jsx("th",{children:"Score"})]})}),e.jsx("tbody",{children:(()=>{const s=g();return d.slice().sort((t,a)=>{const i=t.name.split(" ").slice(-1)[0].toLowerCase(),n=a.name.split(" ").slice(-1)[0].toLowerCase();return i.localeCompare(n)}).map(t=>{const i=((s||{})[t.username]||{}).phaseData?.[1]||{},n=i.a2Answers??Array.from({length:fe.length},()=>""),l=typeof i.a2Score=="number"?i.a2Score:"";return e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),n.map((c,r)=>{const o=!!fe[r]&&fe[r](c||"");return e.jsx("td",{className:o?"cell-correct":"",children:c||""},r)}),e.jsx("td",{children:l})]},t.id)})})()})]})})]}),f==="a3"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",children:"Activity 3: Choose a Possible Correlation"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>v(w),className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 3: Choose a Possible Correlation"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students choose one pair of variables that they think may have a possible correlation and explain why they think these two variables might be related."]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Variable 1"}),e.jsx("th",{children:"Variable 2"}),e.jsx("th",{children:"Encoded Reason"})]})}),e.jsx("tbody",{children:(()=>{const s=g();return d.slice().sort((t,a)=>t.name.localeCompare(a.name)).map(t=>{const i=((s||{})[t.username]||{}).phaseData?.[1]||{},n=i.a3Var1||"",l=i.a3Var2||"",c=i.a3Reason||"";return e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{children:n}),e.jsx("td",{children:l}),e.jsx("td",{children:c})]},t.id)})})()})]})})]}),f==="a4a"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",children:"Activity 4a: Write Your Research Question (Initial)"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>v(w),className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 4a: Write Your Research Question (Initial)"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students turn their idea into a research question. They encode first their first version of their research question. The teacher will provide feedback."]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Timestamp (Submit Question)"}),e.jsx("th",{children:"Research Question"}),e.jsx("th",{children:"Teacher Feedback"})]})}),e.jsx("tbody",{children:(()=>{const s=ns();return d.slice().sort((t,a)=>t.name.localeCompare(a.name)).map(t=>{const a=(s||{})[t.username]||{},i=a.timestamp||"";let n="";if(i)try{const o=new Date(i),h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][o.getMonth()],p=String(o.getDate()).padStart(2,"0"),C=o.getFullYear(),N=String(o.getHours()).padStart(2,"0"),S=String(o.getMinutes()).padStart(2,"0"),ee=String(o.getSeconds()).padStart(2,"0");n=`${h} ${p}, ${C} - ${N}:${S}:${ee}`}catch{n=i}const l=a.question||"",c=a.feedback||"",r=!!c;return e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{children:n}),e.jsx("td",{style:{maxWidth:420,wordBreak:"break-word"},children:l}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{value:c||ie[t.id]||"",onChange:o=>Se(m=>({...m,[t.id]:o.target.value})),placeholder:"Enter feedback",disabled:r}),e.jsx("button",{onClick:()=>{const o=ie[t.id]||"";ls(t.username,o),Se(m=>({...m,[t.id]:""}))},disabled:r||!(ie[t.id]&&ie[t.id].trim().length>0),children:"Send"})]})})]},t.id)})})()})]})})]}),f==="a4b"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",children:"Activity 4b: Write Your Research Question (Revised)"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>v(w),className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 4b: Write Your Research Question (Revised)"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students finalize their research questions based on teacher's feedback."]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Timestamp (Finalize Question)"}),e.jsx("th",{children:"Revised Research Question"})]})}),e.jsx("tbody",{children:(()=>{const s=cs();return d.slice().sort((t,a)=>t.name.localeCompare(a.name)).map(t=>{const a=(s||{})[t.username]||{},i=a.timestamp||"";let n="";if(i)try{const c=new Date(i),o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][c.getMonth()],m=String(c.getDate()).padStart(2,"0"),h=c.getFullYear(),p=String(c.getHours()).padStart(2,"0"),C=String(c.getMinutes()).padStart(2,"0"),N=String(c.getSeconds()).padStart(2,"0");n=`${o} ${m}, ${h} - ${p}:${C}:${N}`}catch{n=i}const l=a.finalQuestion||"";return e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{children:n}),e.jsx("td",{style:{maxWidth:480,wordBreak:"break-word"},children:l})]},t.id)})})()})]})})]})]})]}),k==="phase4"&&e.jsxs("div",{className:"lesson-layout",children:[e.jsxs("aside",{className:"activity-list",children:[e.jsx("button",{className:`activity ${q==="act1"?"active":""}`,onClick:()=>he("act1"),children:"Activity 1"}),e.jsx("button",{className:`activity ${q==="act2"?"active":""}`,onClick:()=>he("act2"),children:"Activity 2"}),e.jsx("button",{className:`activity ${q==="act3"?"active":""}`,onClick:()=>he("act3"),children:"Activity 3"})]}),e.jsxs("section",{className:"activity-panel",children:[q==="act1"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Peer Review: Quality Check Before Submission"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=te(),t=Object.keys(s).map(a=>({username:a,data:s[a]?.review||{}}));v(t,"lesson3_phase4_peerreview.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Peer Review: Quality Check Before Submission"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students ask their peers to review their Lesson 1 output before submission."]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:e.jsxs("select",{className:"class-filter",value:T,onChange:s=>me(s.target.value),children:[e.jsx("option",{value:"",children:"All Students (who submitted)"}),Object.keys(te()).slice().sort((s,t)=>s.split(" ").slice(-1)[0].localeCompare(t.split(" ").slice(-1)[0])).map(s=>e.jsx("option",{value:s,children:s},s))]})}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"45%"},children:"Prompt"}),e.jsx("th",{children:"Student Answer"})]})}),e.jsx("tbody",{children:(()=>{const s=g(),t=rs(),a=Object.keys(t).sort((c,r)=>c.split(" ").slice(-1)[0].localeCompare(r.split(" ").slice(-1)[0])),i=T||a[0]||"",n=i?s[i]?.phaseData?.[4]||{}:{};return[["1. CLARITY: Can you understand their finding and recommendation without asking questions?",n.clarity||""],["2. EVIDENCE: Is their recommendation clearly supported by their r value and interpretation?",n.evidence||""],["3. ACTIONABILITY: Could a stakeholder actually implement this recommendation?",n.actionability||""],["4. HONESTY: Did they acknowledge limitations of their data?",n.honesty||""],["ONE STRENGTH of their work:",n.strength||""],["ONE SUGGESTION for improvement:",n.suggestion||""],["Username of Peer reviewer:",n.peerReviewer||""]].map((c,r)=>e.jsxs("tr",{children:[e.jsx("td",{style:{whiteSpace:"pre-wrap",textAlign:"left"},children:c[0]}),e.jsx("td",{style:{whiteSpace:"pre-wrap"},children:c[1]})]},r))})()})]})})]}),q==="act2"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Reflection and Final Submission"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=V(),t=g(),a=Object.keys(s).map(i=>({username:i,data:t[i]?.phaseData?.[4]||{}}));v(a,"lesson1_phase4_reflection.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Reflection and Final Submission"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students reflect on their Lesson 1 journey."]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:e.jsxs("select",{className:"class-filter",value:T,onChange:s=>me(s.target.value),children:[e.jsx("option",{value:"",children:"All Students (who completed)"}),Object.keys(W()).slice().sort((s,t)=>s.split(" ").slice(-1)[0].localeCompare(t.split(" ").slice(-1)[0])).map(s=>e.jsx("option",{value:s,children:s},s))]})}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"45%"},children:"Prompt"}),e.jsx("th",{children:"Student Answer"})]})}),e.jsx("tbody",{children:(()=>{const s=g(),t=V(),a=Object.keys(t).sort((c,r)=>c.split(" ").slice(-1)[0].localeCompare(r.split(" ").slice(-1)[0])),i=T||a[0]||"",n=i?s[i]?.phaseData?.[4]||{}:{};return[["1. How confident am I in my correlation calculation?",n.reflection?.confidence||""],["2. What contributed to this confidence level?",n.reflection?.contributed||""],["3. What was most challenging about this project?",n.reflection?.challenging||""],["4a. Statistics:",n.reflection?.stats||""],["4b. Climate:",n.reflection?.climate||""],["4c. The connection between them:",n.reflection?.connection||""],["5. If I could extend this project, I would investigate:",n.reflection?.extend||""],["6. One thing I learned about myself as a learner:",n.reflection?.learned||""]].map((c,r)=>e.jsxs("tr",{children:[e.jsx("td",{style:{whiteSpace:"pre-wrap",textAlign:"left"},children:c[0]}),e.jsx("td",{style:{whiteSpace:"pre-wrap"},children:c[1]})]},r))})()})]})})]}),q==="act3"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Submission of Final Outputs"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=V(),t=g(),a=Object.keys(s).map(i=>({username:i,data:t[i]?.phaseData?.[4]||{}}));v(a,"lesson1_phase4_submission.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Submission of Final Outputs"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students submit their final outputs depending on the type or format they chose."]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:e.jsxs("select",{className:"class-filter",value:T,onChange:s=>me(s.target.value),children:[e.jsx("option",{value:"",children:"All Students (who completed)"}),Object.keys(V()).slice().sort((s,t)=>s.split(" ").slice(-1)[0].localeCompare(t.split(" ").slice(-1)[0])).map(s=>e.jsx("option",{value:s,children:s},s))]})}),e.jsx("div",{style:{aspectRatio:"16/9",background:"#f6f7fb",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},children:(()=>{const s=g(),t=V(),a=Object.keys(t).slice().sort((o,m)=>o.split(" ").slice(-1)[0].localeCompare(m.split(" ").slice(-1)[0])),i=T||a[0]||"",n=i?s[i]?.phaseData?.[4]||{}:{},l=n?.upload||n?.uploadUrl?n.upload||{url:n.uploadUrl,mimeType:n.mimeType}:null,c=l?.url||"",r=l?.mimeType||"";return c?r?.includes("pdf")||c.endsWith(".pdf")?e.jsx("iframe",{src:c,title:`preview-${i}`,style:{width:"100%",height:"100%",border:"none",borderRadius:6}}):r?.startsWith("image")||c.startsWith("data:image")||/\.(png|jpe?g|gif|webp)$/i.test(c)?e.jsx("img",{src:c,alt:`preview-${i}`,style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:6}}):e.jsx("iframe",{src:c,title:`preview-${i}`,style:{width:"100%",height:"100%",border:"none",borderRadius:6}}):"Preview frame (student upload preview)"})()}),e.jsxs("div",{style:{marginTop:12,padding:12,background:"#fff",borderRadius:8,border:"1px solid #e6eef0"},children:[e.jsx("div",{style:{fontWeight:800,marginBottom:8},children:"Scoring Rubric"}),(()=>{const s=["CALCULATION ACCURACY","INTERPRETATION","PATTERN ANALYSIS","DATA RELIABILITY EVALUATION","EVIDENCE-BASED CONCLUSIONS","ACTIONABLE RECOMMENDATION","COMMUNICATION CLARITY","REFLECTION ON PROCESS"],t=[["r value incorrect or calculation process has major errors","r correctly calculated using appropriate method; minor errors in process","r calculated both manually and digitally with verification; all steps shown accurately"],["Misidentifies strength or direction; interpretation unclear","Correctly identifies strength and direction; explains meaning in context","Thorough interpretation with nuanced understanding; connects to climate patterns effectively"],["Patterns not clearly identified; limited use of visual/numerical evidence","Patterns identified and described using scatter plot and r value","Sophisticated pattern analysis; discusses seasonal variations, outliers, or subgroup differences"],["No discussion of limitations or data quality","Acknowledges at least 2 limitations (sample size, time period, missing variables)","Critical evaluation of data quality with specific implications for confidence in findings"],["Conclusions not clearly supported by data; confuses correlation with causation","Conclusions logically follow from data; distinguishes between correlation and causation","Nuanced conclusions acknowledging what data does and does not show; considers alternative explanations"],["No clear recommendation OR recommendation not connected to finding","Specific, stakeholder-focused recommendation with clear justification","Highly actionable recommendation with detailed implementation guidance; addresses potential challenges"],["Output disorganized; findings unclear; poor visual/written presentation","Clear organization; findings communicated effectively; appropriate visuals","Professional-quality output; compelling presentation; excellent integration of text, data, visuals"],["Minimal reflection on assumptions, uncertainties, or learning","Reflects on analytical assumptions and uncertainties; identifies learning growth","Deep metacognitive reflection; discusses how experience changed understanding of statistics and climate"]];return(()=>{const a=T||Object.keys(V())[0]||"",n=_.flatMap(c=>c.students||[]).find(c=>c.username===a),l=n?`${n.name} (${a})`:a||"";return e.jsx(as,{criteria:s,options:t,studentDisplay:l,onRecord:c=>{const o=c.map(h=>h===0?2:h===1?3:4).reduce((h,p)=>h+p,0),m=T||Object.keys(V())[0]||"";if(!m){alert("No student selected");return}try{os(m,4,o),alert("Recorded score: "+o)}catch{alert("Failed to save score")}}})})()})()]})]})]})]}),k==="phase2"&&e.jsxs("div",{className:"lesson-layout",children:[e.jsxs("aside",{className:"activity-list",children:[e.jsx("button",{className:`activity ${f==="a1"?"active":""}`,onClick:()=>R("a1"),children:"Activity 1"}),e.jsx("button",{className:`activity ${f==="a2"?"active":""}`,onClick:()=>R("a2"),children:"Activity 2"}),e.jsx("button",{className:`activity ${f==="a3"?"active":""}`,onClick:()=>R("a3"),children:"Activity 3a"}),e.jsx("button",{className:`activity ${f==="a4"?"active":""}`,onClick:()=>R("a4"),children:"Activity 3b"}),e.jsx("button",{className:`activity ${f==="a5"?"active":""}`,onClick:()=>R("a5"),children:"Activity 4a"}),e.jsx("button",{className:`activity ${f==="a6"?"active":""}`,onClick:()=>R("a6"),children:"Activity 4b"})]}),e.jsxs("section",{className:"activity-panel",children:[f==="a1"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",children:"Activity 1: Understand Scatter Plots"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=Te(),t=d.map(a=>({name:a.name,username:a.username,answers:s[a.username]?.answers||Array(6).fill(""),score:s[a.username]?.score??""}));v(t,"phase2-activity1.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>{},className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students read the short explanation of scatter plots and their common patterns, study the visual guides that show what each pattern looks like, and practice by identifying the pattern shown in each sample scatter plot."]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Timestamp (Submit)"}),Array.from({length:6},(s,t)=>e.jsxs("th",{children:["S",t+1]},t)),e.jsx("th",{children:"Score"})]})}),e.jsx("tbody",{children:(()=>{const s=Te(),t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return d.slice().sort((a,i)=>a.name.localeCompare(i.name)).map(a=>{const i=(s||{})[a.username]||{},n=i.timestamp||"";let l="";if(n)try{const o=new Date(n),m=t[o.getMonth()],h=String(o.getDate()).padStart(2,"0"),p=o.getFullYear(),C=String(o.getHours()).padStart(2,"0"),N=String(o.getMinutes()).padStart(2,"0"),S=String(o.getSeconds()).padStart(2,"0");l=`${m} ${h}, ${p} - ${C}:${N}:${S}`}catch{l=n}const c=i.answers||Array(6).fill(""),r=typeof i.score=="number"?i.score:i.score??"";return e.jsxs("tr",{children:[e.jsx("td",{children:a.name}),e.jsx("td",{children:l}),c.map((o,m)=>e.jsx("td",{children:o},m)),e.jsx("td",{children:r})]},a.id)})})()})]})})]}),f==="a2"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",children:"Activity 2: Guided Pearson r Practice"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=$e(),t=d.map(a=>({name:a.name,username:a.username,payload:s[a.username]||{}}));v(t,"phase2-activity2.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>{},className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students follow the step-by-step interactive guide on the screen, complete each step before moving to the next one, and enter values where prompted and observe how each step affects the final result."]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Variable 1 (x)"}),e.jsx("th",{children:"Variable 2 (y)"}),e.jsx("th",{children:"Step1"}),e.jsx("th",{children:"Step2"}),e.jsx("th",{children:"Step3"}),e.jsx("th",{children:"Step5"}),e.jsx("th",{children:"Step7"}),e.jsx("th",{children:"Step9"}),e.jsx("th",{children:"Encoded"})]})}),e.jsx("tbody",{children:(()=>{const s=Ee(),t=$e();return d.slice().sort((a,i)=>a.name.localeCompare(i.name)).map(a=>{const i=s[a.username]||{},n=t[a.username]||{},l=i.steps||{};return e.jsxs("tr",{children:[e.jsx("td",{children:a.name}),e.jsx("td",{children:n.var1||""}),e.jsx("td",{children:n.var2||""}),e.jsx("td",{children:l.n||""}),e.jsx("td",{children:l.xSum||""}),e.jsx("td",{children:l.ySum||""}),e.jsx("td",{children:l.xySum||""}),e.jsx("td",{children:l.xSqSum||""}),e.jsx("td",{children:l.ySqSum||""}),e.jsx("td",{children:i.answer||""})]},a.id)})})()})]})})]}),f==="a3"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",children:"Activity 3a: Spreadsheet Pearson r (PDF Outputs)"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=Fe(),t=d.map(a=>({name:a.name,username:a.username,meta:s[a.username]||{}}));v(t,"phase2-activity3a.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>{},className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students calculate Pearson r again, this time using a spreadsheet tool."]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("div",{style:{marginBottom:8},children:e.jsxs("select",{className:"class-filter",value:pe,onChange:s=>Ge(s.target.value),children:[e.jsx("option",{value:"",children:"All Students (who finalized)"}),d.slice().sort((s,t)=>s.name.localeCompare(t.name)).map(s=>e.jsx("option",{value:s.username,children:s.name},s.username))]})}),e.jsx("div",{style:{aspectRatio:"16/9",background:"#f6f7fb",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},children:(()=>{const s=Fe(),t=(pe?s[pe]:null)||null,a=t&&(t.uploadUrl||t.file||t.pdf)||"";return a?t&&t.mimeType&&t.mimeType.includes("pdf")||String(a).startsWith("data:application/pdf")?e.jsx("iframe",{src:a,style:{width:"100%",height:"100%",border:"none",borderRadius:6}}):e.jsx("img",{src:a,style:{maxWidth:"100%",maxHeight:"100%"}}):"Preview frame (PDF)"})()})]})]}),f==="a4"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",children:"Activity 3b: Spreadsheet Pearson r (Self-Assessment)"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=Ve(),t=d.map(a=>({name:a.name,username:a.username,answers:s[a.username]?.answers||[]}));v(t,"phase2-activity3b.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>{},className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students reflect on their spreadsheet skills."]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Timestamp (Submit)"}),Array.from({length:5},(s,t)=>e.jsxs("th",{children:["Q",t+1]},t))]})}),e.jsx("tbody",{children:(()=>{const s=Ve(),t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return d.slice().sort((a,i)=>a.name.localeCompare(i.name)).map(a=>{const i=s[a.username]||{};let n="";if(i.timestamp)try{const l=new Date(i.timestamp),c=t[l.getMonth()],r=String(l.getDate()).padStart(2,"0"),o=l.getFullYear(),m=String(l.getHours()).padStart(2,"0"),h=String(l.getMinutes()).padStart(2,"0"),p=String(l.getSeconds()).padStart(2,"0");n=`${c} ${r}, ${o} - ${m}:${h}:${p}`}catch{n=i.timestamp}return e.jsxs("tr",{children:[e.jsx("td",{children:a.name}),e.jsx("td",{children:n}),(i.answers||Array(5).fill("")).map((l,c)=>e.jsx("td",{children:l},c))]},a.id)})})()})]})})]}),f==="a5"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",children:"Activity 4a: Interpret Your Pearson r Value (Quiz)"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=ge(),t=d.map(a=>({name:a.name,username:a.username,checked:s[a.username]?.checked||!1}));v(t,"phase2-activity4a.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>{},className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students study the interpretation table that explains what different r values mean, locate their computed r value in the table, and interpret what their result says about the relationship between their chosen climate variables."]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Timestamp"}),e.jsx("th",{children:"Strength answers"}),e.jsx("th",{children:"Direction answers"}),e.jsx("th",{children:"Score"})]})}),e.jsx("tbody",{children:(()=>{const s=ge();return d.slice().sort((t,a)=>t.name.localeCompare(a.name)).map(t=>{const a=s[t.username]||{};let i="";if(a.timestamp)try{const c=new Date(a.timestamp),o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][c.getMonth()],m=String(c.getDate()).padStart(2,"0"),h=c.getFullYear(),p=String(c.getHours()).padStart(2,"0"),C=String(c.getMinutes()).padStart(2,"0"),N=String(c.getSeconds()).padStart(2,"0");i=`${o} ${m}, ${h} - ${p}:${C}:${N}`}catch{i=a.timestamp}const n=Array.isArray(a.strength)?a.strength.join("; "):"",l=Array.isArray(a.direction)?a.direction.join("; "):"";return e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{children:i}),e.jsx("td",{children:n}),e.jsx("td",{children:l}),e.jsx("td",{children:""})]},t.id)})})()})]})})]}),f==="a6"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",children:"Activity 4b: Interpret Your Pearson r Value (Interpretation)"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=ds(),t=d.map(a=>({name:a.name,username:a.username,interp:s[a.username]?.interp||""}));v(t,"phase2-activity4b.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>{},className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students study the interpretation table that explains what different r values mean, locate their computed r value in the table, and interpret what their result says about the relationship between their chosen climate variables."]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Timestamp"}),e.jsx("th",{children:"Variable 1"}),e.jsx("th",{children:"Variable 2"}),e.jsx("th",{children:"Research Question"}),e.jsx("th",{children:"Computed r"}),e.jsx("th",{children:"Strength"}),e.jsx("th",{children:"Direction"}),e.jsx("th",{children:"Interpretation"})]})}),e.jsx("tbody",{children:(()=>{const s=We?We():{};return d.slice().sort((t,a)=>t.name.localeCompare(a.name)).map(t=>{const a=s[t.username]||{};let i="";if(a.timestamp)try{const p=new Date(a.timestamp),N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][p.getMonth()],S=String(p.getDate()).padStart(2,"0"),ee=p.getFullYear(),ye=String(p.getHours()).padStart(2,"0"),se=String(p.getMinutes()).padStart(2,"0"),_e=String(p.getSeconds()).padStart(2,"0");i=`${N} ${S}, ${ee} - ${ye}:${se}:${_e}`}catch{i=a.timestamp}const n=a.var1||"",l=a.var2||"",c=a.question||"",r=a.computedR||"",o=a.strength||"",m=a.direction||"",h=a.interp||"";return e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{children:i}),e.jsx("td",{children:n}),e.jsx("td",{children:l}),e.jsx("td",{children:c}),e.jsx("td",{children:r}),e.jsx("td",{children:o}),e.jsx("td",{children:m}),e.jsx("td",{children:h})]},t.id)})})()})]})})]})]})]}),k==="phase3"&&e.jsxs("div",{className:"lesson-layout",children:[e.jsxs("aside",{className:"activity-list",children:[e.jsx("button",{className:`activity ${B==="act1"?"active":""}`,onClick:()=>de("act1"),children:"Activity 1"}),e.jsx("button",{className:`activity ${B==="act2"?"active":""}`,onClick:()=>de("act2"),children:"Activity 2"}),e.jsx("button",{className:`activity ${B==="act3"?"active":""}`,onClick:()=>de("act3"),children:"Activity 3"})]}),e.jsxs("section",{className:"activity-panel",children:[B==="act1"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 1: Relating Findings to Real-World"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=g(),t=z(),i=Object.keys(t).map(n=>({username:n,state:s[n]||{}})).map(n=>{const l=n.state.phaseData?.[3]||{};return{username:n.username,r:l.part1_r??l.r??"",interp:l.part1_interp??l.interp??""}});v(i,"lesson1_phase3_activity1.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>{y("Activity 1: Relating Findings to Real-World")},className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students complete the critical analysis worksheet."]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:e.jsxs("select",{className:"class-filter",value:Ne,onChange:s=>Je(s.target.value),children:[e.jsx("option",{value:"",children:"All Students (who finished)"}),Object.keys(z()).slice().sort((s,t)=>{const a=s.split(" ").slice(-1)[0].toLowerCase(),i=t.split(" ").slice(-1)[0].toLowerCase();return a.localeCompare(i)}).map(s=>e.jsx("option",{value:s,children:s},s))]})}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"45%"},children:"Question / Prompt"}),e.jsx("th",{children:"Student Answer"})]})}),e.jsx("tbody",{children:(()=>{const s=g(),t=z(),a=Object.keys(t).sort((c,r)=>c.split(" ").slice(-1)[0].localeCompare(r.split(" ").slice(-1)[0])),i=Ne||a[0]||"",n=i?s[i]?.phaseData?.[3]||{}:{};return[["PART 1: What Your Data Shows",""],["My correlation coefficient: r =",n.part1_r||""],["Interpretation:",n.part1_interp||""],["PART 2: Explaining the Pattern",""],["Why might these variables be related?",n.part2_reason||""],["Possible Explanation 1:",n.part2_exp1||""],["Supporting Evidence",n.part2_evid1||""],["Possible Explanation 2:",n.part2_exp2||""],["Supporting Evidence",n.part2_evid2||""],["Which explanation seems most plausible? Why?",n.part2_plausible||""],["PART 3: What Your Data DOESN'T Show",""],["Does correlation prove causation here?",n.part3_because||""],["What other factors might influence this relationship?",[n.part3_factor1||"",n.part3_factor2||""].filter(Boolean).join("; ")||""],["PART 4: Data Quality and Limitations",""],["My biggest concern about data reliability:",n.part4_concern||""],["How does this limitation affect my confidence in the findings?",n.part4_confidence||""]].map((c,r)=>e.jsxs("tr",{children:[e.jsx("td",{style:{whiteSpace:"pre-wrap",textAlign:"left"},children:c[0]}),e.jsx("td",{children:c[1]})]},r))})()})]})})]}),B==="act2"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 2: Analyzing Key Stakeholders"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=g(),t=G(),a=Object.keys(t).map(i=>({username:i,state:s[i]?.phaseData?.[3]||{}}));v(a,"lesson1_phase3_activity2.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 2: Analyzing Key Stakeholders"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students complete the stakeholder analysis worksheet."]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:e.jsxs("select",{className:"class-filter",value:we,onChange:s=>He(s.target.value),children:[e.jsx("option",{value:"",children:"All Students (who submitted)"}),Object.keys(G()).slice().sort((s,t)=>s.split(" ").slice(-1)[0].localeCompare(t.split(" ").slice(-1)[0])).map(s=>e.jsx("option",{value:s,children:s},s))]})}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"45%"},children:"Question / Prompt"}),e.jsx("th",{children:"Student Answer"})]})}),e.jsx("tbody",{children:(()=>{const s=g(),t=G(),a=Object.keys(t).sort((c,r)=>c.split(" ").slice(-1)[0].localeCompare(r.split(" ").slice(-1)[0])),i=we||a[0],n=i?s[i]?.phaseData?.[3]||{}:{};return[["Our research question:",n.sa_question||""],["Our r value:",n.sa_rvalue||""],["Interpretation:",n.sa_interp||""],["PART 1: Identify Potential Stakeholders",""],[`Who in our community might care about this relationship?
1.
2.
3.`,(n.sa_stakeholders||[]).map(c=>typeof c=="string"?c:c?.name||"").filter(Boolean).join(`
`)],["PART 2: Why It Matters to Them",""],["Choose ONE stakeholder and explain: This relationship matters to: because:",(n.sa_matters_to||"")+(n.sa_because?`

`+n.sa_because:"")||""],["PART 3: Current Decisions This Affects",""],[`What decisions does this stakeholder make that could be informed by your finding?
1.
2.`,(n.sa_decisions||[]).join(`
`)]].map((c,r)=>e.jsxs("tr",{children:[e.jsx("td",{style:{whiteSpace:"pre-wrap",textAlign:"left"},children:c[0]}),e.jsx("td",{style:{whiteSpace:"pre-wrap"},children:c[1]})]},r))})()})]})})]}),B==="act3"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 3: Building Evidence-Based Recommendation"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=g(),t=M(),a=Object.keys(t).map(i=>({username:i,state:s[i]?.phaseData?.[3]||{}}));v(a,"lesson1_phase3_activity3.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 3: Building Evidence-Based Recommendation"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students complete the recommendation template."]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:e.jsxs("select",{className:"class-filter",value:Ce,onChange:s=>ze(s.target.value),children:[e.jsx("option",{value:"",children:"All Students (who finalized)"}),Object.keys(M()).slice().sort((s,t)=>s.split(" ").slice(-1)[0].localeCompare(t.split(" ").slice(-1)[0])).map(s=>e.jsx("option",{value:s,children:s},s))]})}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"45%"},children:"Template Field"}),e.jsx("th",{children:"Student Answer"})]})}),e.jsx("tbody",{children:(()=>{const s=g(),t=M(),a=Object.keys(t).sort((r,o)=>r.split(" ").slice(-1)[0].localeCompare(o.split(" ").slice(-1)[0])),i=Ce||a[0]||"",n=i?s[i]?.phaseData?.[3]||{}:{},l=!!(t&&i&&t[i]?.finalized);return[["TO:",l&&n.rec_to||""],["FROM:",l&&n.rec_from||""],["RE:",l&&n.rec_re||""],["DATE:",l&&n.rec_date||""],["EXECUTIVE SUMMARY",""],["Variable 1:",l&&n.rec_var1||""],["Variable 2:",l&&n.rec_var2||""],["Strength and direction:",l&&n.rec_strength||""],["R value:",l&&n.rec_rvalue||""],["What the data means:",l&&n.rec_meaning||""],["WHAT THIS MEANS FOR",""],["Stakeholder:",l&&n.rec_means_for||""],["Answer:",l&&n.rec_significance||""],["RECOMMENDATION",l&&n.rec_action||""],["JUSTIFICATION",l&&n.rec_justification||""],["LIMITATIONS & CAUTIONS",l&&n.rec_limitations||""],["STRENGTHENING THE EVIDENCE",l&&n.rec_strengthen||""],["CONCLUSION:",l&&n.rec_conclusion||""]].map((r,o)=>e.jsxs("tr",{children:[e.jsx("td",{style:{whiteSpace:"pre-wrap",textAlign:"left"},children:r[0]}),e.jsx("td",{style:{whiteSpace:"pre-wrap"},children:r[1]})]},o))})()})]})})]})]})]}),k!=="phase1"&&k!=="phase2"&&k!=="phase3"&&k!=="phase4"&&e.jsx("div",{className:"phase-content"})]})]}),A==="lesson2"&&e.jsxs("div",{className:"subpage",children:[e.jsx("div",{className:"subpage-header",children:e.jsx("h3",{className:"subpage-title",children:"Lesson 2: Climate Linear Regression Equations"})}),e.jsxs("div",{className:"lesson-phases",children:[e.jsxs("div",{className:"phase-tabs",children:[e.jsx("button",{className:`phase ${$==="phase1"?"active":""}`,onClick:()=>ne("phase1"),children:"Phase 1"}),e.jsx("button",{className:`phase ${$==="phase2"?"active":""}`,onClick:()=>ne("phase2"),children:"Phase 2"}),e.jsx("button",{className:`phase ${$==="phase3"?"active":""}`,onClick:()=>ne("phase3"),children:"Phase 3"}),e.jsx("button",{className:`phase ${$==="phase4"?"active":""}`,onClick:()=>ne("phase4"),children:"Phase 4"})]}),$==="phase1"&&e.jsxs("div",{className:"lesson-layout",children:[e.jsxs("aside",{className:"activity-list",children:[e.jsx("button",{className:`activity ${D==="a1a"?"active":""}`,onClick:()=>Y("a1a"),children:"Activity 1a"}),e.jsx("button",{className:`activity ${D==="a1b"?"active":""}`,onClick:()=>Y("a1b"),children:"Activity 1b"}),e.jsx("button",{className:`activity ${D==="a2a"?"active":""}`,onClick:()=>Y("a2a"),children:"Activity 2a"}),e.jsx("button",{className:`activity ${D==="a2b"?"active":""}`,onClick:()=>Y("a2b"),children:"Activity 2b"}),e.jsx("button",{className:`activity ${D==="a3"?"active":""}`,onClick:()=>Y("a3"),children:"Activity 3"}),e.jsx("button",{className:`activity ${D==="a4"?"active":""}`,onClick:()=>Y("a4"),children:"Activity 4"})]}),e.jsxs("section",{className:"activity-panel",children:[D==="a1a"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 1a: Climate Change Observation (Scenarios)"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>v(w,"lesson2_phase1_activity1a.csv"),className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 1a: Climate Change Observation (Scenarios)"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students view each image carefully, note what climate-related change or impact is being shown, and encode their observations."]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),Array.from({length:8},(s,t)=>e.jsxs("th",{children:["Scenario ",t+1]},t))]})}),e.jsx("tbody",{children:(()=>{const s=hs();return d.slice().sort((t,a)=>t.name.split(" ").slice(-1)[0].localeCompare(a.name.split(" ").slice(-1)[0])).map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),Array.from({length:8}).map((a,i)=>{const n=(s||{})[t.username]?s[t.username][i+1]:null,l=n?`Obs: ${n.obs||""}
Affected: ${n.affected||""}
Causes: ${n.causes||""}`:"";return e.jsx("td",{style:{whiteSpace:"pre-wrap",maxWidth:320},children:l},i)})]},t.id))})()})]})})]}),D==="a1b"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 1b: Climate Change Observation (Questions)"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>v(w,"lesson2_phase1_activity1b.csv"),className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 1b: Climate Change Observation (Questions)"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students view each image carefully, note what climate-related change or impact is being shown, and encode their observations."]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Most Urgent Scenario"}),e.jsx("th",{children:"Question 1"}),e.jsx("th",{children:"Question 2"}),e.jsx("th",{children:"Question 3 (Optional)"})]})}),e.jsx("tbody",{children:(()=>{const s=ms();return d.slice().sort((t,a)=>t.name.split(" ").slice(-1)[0].localeCompare(a.name.split(" ").slice(-1)[0])).map(t=>{const a=(s||{})[t.username]||{};return e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{style:{whiteSpace:"pre-wrap"},children:a.mostUrgent||""}),e.jsx("td",{style:{whiteSpace:"pre-wrap"},children:a.q1||""}),e.jsx("td",{style:{whiteSpace:"pre-wrap"},children:a.q2||""}),e.jsx("td",{style:{whiteSpace:"pre-wrap"},children:a.q3||""})]},t.id)})})()})]})})]}),D==="a2a"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 2a: Variable Exploration & Identification (Checkpoints)"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>v(w,"lesson2_phase1_activity2a.csv"),className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 2a: Variable Exploration & Identification (Checkpoints)"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students watch a video on the concept of Regression Analysis, investigate different climate-related variables, and distinguish between independent variables (factors that influence change) and dependent variables (outcomes that are affected)."]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),Array.from({length:5},(s,t)=>e.jsxs("th",{children:["Question ",t+1]},t)),e.jsx("th",{children:"Score Earned"})]})}),e.jsx("tbody",{children:(()=>{const s=us();return d.slice().sort((t,a)=>t.name.split(" ").slice(-1)[0].localeCompare(a.name.split(" ").slice(-1)[0])).map(t=>{const a=s[t.username]||{answers:[],score:""},i=Array.isArray(a.answers)?a.answers.slice(0,5):Array.from({length:5},()=>""),n=typeof a.score=="number"?a.score:"";return e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),i.map((l,c)=>e.jsx("td",{style:{whiteSpace:"pre-wrap"},children:l||""},c)),e.jsx("td",{children:n})]},t.id)})})()})]})})]}),D==="a2b"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 2b: Variable Exploration & Identification (Pair of Variables)"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>v(w,"lesson2_phase1_activity2b.csv"),className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 2b: Variable Exploration & Identification (Pair of Variables)"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students watch a video on the concept of Regression Analysis, investigate different climate-related variables, and distinguish between independent variables (factors that influence change) and dependent variables (outcomes that are affected)."]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),Array.from({length:5},(s,t)=>e.jsxs("th",{children:["Question ",t+1," (IV/DV)"]},t)),e.jsx("th",{children:"Score Earned"})]})}),e.jsx("tbody",{children:(()=>{const s=ps();return d.slice().sort((t,a)=>t.name.split(" ").slice(-1)[0].localeCompare(a.name.split(" ").slice(-1)[0])).map(t=>{const a=s[t.username]||{pairs:[]},i=Array.isArray(a.pairs)?a.pairs.slice(0,5):Array.from({length:5},()=>({predictor:"",response:""}));return e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),i.map((n,l)=>e.jsx("td",{style:{whiteSpace:"pre-wrap"},children:(n?.predictor||"")+(n?.response?"  "+n.response:"")},l)),e.jsx("td",{children:""})]},t.id)})})()})]})})]}),D==="a3"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 3: Climate Variable Selection"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>v(w,"lesson2_phase1_activity3.csv"),className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 3: Climate Variable Selection"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students choose a specific pair of climate-related variables from the Davao Region that they want to investigate for their regression analysis project and justify their choice."]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"IV"}),e.jsx("th",{children:"DV"}),e.jsx("th",{children:"Reason"}),e.jsx("th",{children:"Prediction"}),e.jsx("th",{children:"Research Question"})]})}),e.jsx("tbody",{children:(()=>{const s=xs();return d.slice().sort((t,a)=>t.name.split(" ").slice(-1)[0].localeCompare(a.name.split(" ").slice(-1)[0])).map(t=>{const a=s[t.username]||{};return e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{children:a.var1||""}),e.jsx("td",{children:a.var2||""}),e.jsx("td",{children:a.reasoning||""}),e.jsx("td",{children:a.prediction||""}),e.jsx("td",{children:a.researchQuestion||""})]},t.id)})})()})]})})]}),D==="a4"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 4: Exit Ticket"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>v(w,"lesson2_phase1_activity4.csv"),className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 4: Exit Ticket"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students reflect on what they learned during the lesson by completing a brief exit ticket."]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Important Learning"}),e.jsx("th",{children:"Confidence"}),e.jsx("th",{children:"Understanding"}),e.jsx("th",{children:"Connection"})]})}),e.jsx("tbody",{children:d.slice().sort((s,t)=>s.name.split(" ").slice(-1)[0].localeCompare(t.name.split(" ").slice(-1)[0])).map(s=>{const a=js()[s.username]||null;return e.jsxs("tr",{children:[e.jsx("td",{children:s.name}),e.jsx("td",{style:{whiteSpace:"pre-wrap"},children:a?a.importantLearning:""}),e.jsx("td",{children:a?a.confidence:""}),e.jsx("td",{children:a?a.understanding:""}),e.jsx("td",{children:a?a.connection:""})]},s.id)})})]})})]})]})]}),$==="phase2"&&e.jsxs("div",{className:"lesson-layout",children:[e.jsxs("aside",{className:"activity-list",children:[e.jsx("button",{className:`activity ${I==="a1"?"active":""}`,onClick:()=>K("a1"),children:"Activity 1"}),e.jsx("button",{className:`activity ${I==="a2"?"active":""}`,onClick:()=>K("a2"),children:"Activity 2"}),e.jsx("button",{className:`activity ${I==="a3"?"active":""}`,onClick:()=>K("a3"),children:"Activity 3"}),e.jsx("button",{className:`activity ${I==="a4a"?"active":""}`,onClick:()=>K("a4a"),children:"Activity 4a"}),e.jsx("button",{className:`activity ${I==="a4b"?"active":""}`,onClick:()=>K("a4b"),children:"Activity 4b"})]}),e.jsxs("section",{className:"activity-panel",children:[I==="a1"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 1: Understanding Regression Lines"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=Me(),t=d.map(a=>({name:a.name,username:a.username,answers:s[a.username]?.answers||Array(4).fill(""),score:s[a.username]?.score??""}));v(t,"lesson2_phase2_activity1.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 1: Understanding Regression Lines"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students watch an instructional video that explains what a regression line is, how it represents the relationship between two variables, and why it's useful for making predictions about climate data."]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),Array.from({length:4},(s,t)=>e.jsxs("th",{children:["Question ",t+1]},t)),e.jsx("th",{children:"Score Earned"})]})}),e.jsx("tbody",{children:(()=>{const s=Me();return d.slice().sort((t,a)=>t.name.split(" ").slice(-1)[0].localeCompare(a.name.split(" ").slice(-1)[0])).map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),(s[t.username]?.answers||Array(4).fill("")).map((a,i)=>e.jsx("td",{children:a},i)),e.jsx("td",{children:s[t.username]?.score??""})]},t.id))})()})]})})]}),I==="a2"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 2: Manual Regression Calculation Practice"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=Ue(),t=d.map(a=>({name:a.name,username:a.username,payload:s[a.username]||{}}));v(t,"lesson2_phase2_activity2.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 2: Manual Regression Calculation Practice"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students calculate a regression equation by hand using sample climate data."]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("div",{style:{marginBottom:8,display:"flex",justifyContent:"flex-end"},children:e.jsxs("select",{className:"class-filter",value:P,onChange:s=>ue(s.target.value),children:[e.jsx("option",{value:"",children:"All Students"}),d.slice().sort((s,t)=>s.name.split(" ").slice(-1)[0].localeCompare(t.name.split(" ").slice(-1)[0])).map(s=>e.jsx("option",{value:s.username,children:s.name},s.username))]})}),e.jsx("div",{style:{aspectRatio:"16/9",background:"#f6f7fb",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},children:(()=>{const s=Ue(),t=P?{...s[P],file:s[P].file,pdf:s[P].pdf,uploadUrl:s[P].uploadUrl}:null,a=t?.file||t?.pdf||t?.uploadUrl||"";return a?e.jsx("iframe",{src:a,style:{width:"100%",height:"100%",border:"none",borderRadius:6}}):"Preview frame (student upload preview)"})()})]})]}),I==="a3"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 3: Spreadsheet Verification of Regression Equation"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=Be(),t=d.map(a=>({name:a.name,username:a.username,meta:s[a.username]||{}}));v(t,"lesson2_phase2_activity3.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 3: Spreadsheet Verification of Regression Equation"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students use spreadsheet software (Google Sheets) to verify the regression equation they calculated manually in Activity 2."]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("div",{style:{marginBottom:8,display:"flex",justifyContent:"flex-end"},children:e.jsxs("select",{className:"class-filter",value:P,onChange:s=>ue(s.target.value),children:[e.jsx("option",{value:"",children:"All Students"}),d.slice().sort((s,t)=>s.name.split(" ").slice(-1)[0].localeCompare(t.name.split(" ").slice(-1)[0])).map(s=>e.jsx("option",{value:s.username,children:s.name},s.username))]})}),e.jsx("div",{style:{aspectRatio:"16/9",background:"#f6f7fb",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},children:(()=>{const s=Be(),t=P?s[P]:null,a=t?.file||t?.pdf||t?.uploadUrl||"";return a?e.jsx("iframe",{src:a,style:{width:"100%",height:"100%",border:"none",borderRadius:6}}):"Preview frame (student upload preview)"})()})]})]}),I==="a4a"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 4a: Calculating Your Climate Project Regression (Outputs)"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=ge(),t=d.map(a=>({name:a.name,username:a.username,payload:s[a.username]||{}}));v(t,"lesson2_phase2_activity4a.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 4a: Calculating Your Climate Project Regression (Outputs)"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students calculate the regression equation for their actual project data and interpret what the results mean for their climate research question."]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("div",{style:{marginBottom:8,display:"flex",justifyContent:"flex-end"},children:e.jsxs("select",{className:"class-filter",value:P,onChange:s=>ue(s.target.value),children:[e.jsx("option",{value:"",children:"All Students"}),d.slice().sort((s,t)=>s.name.split(" ").slice(-1)[0].localeCompare(t.name.split(" ").slice(-1)[0])).map(s=>e.jsx("option",{value:s.username,children:s.name},s.username))]})}),e.jsx("div",{style:{aspectRatio:"16/9",background:"#f6f7fb",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},children:(()=>{const s=vs(),t=P?s[P]:null,a=t?.uploadUrl||t?.file||t?.pdf||"";return a?String(a).startsWith("data:application/pdf")||String(a).toLowerCase().endsWith(".pdf")?e.jsx("iframe",{src:a,style:{width:"100%",height:"100%",border:"none",borderRadius:6}}):e.jsx("img",{src:a,style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:6}}):"Preview frame (student upload preview)"})()})]})]}),I==="a4b"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 4b: Calculating Your Climate Project Regression (Interpretations)"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=qe(),t=d.map(a=>({name:a.name,username:a.username,interp:s[a.username]||{}}));v(t,"lesson2_phase2_activity4b.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 4b: Calculating Your Climate Project Regression (Interpretations)"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students calculate the regression equation for their actual project data and interpret what the results mean for their climate research question."]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Regression Line Equation"}),e.jsx("th",{children:"y-intercept Interpretation"}),e.jsx("th",{children:"Regression Interpretation"})]})}),e.jsx("tbody",{children:(()=>{const s=qe();return d.slice().sort((t,a)=>t.name.split(" ").slice(-1)[0].localeCompare(a.name.split(" ").slice(-1)[0])).map(t=>{const a=s[t.username]?.encodings||{};return e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{children:a.equation||""}),e.jsx("td",{children:a.yIntercept||""}),e.jsx("td",{children:a.interpretation||""})]},t.id)})})()})]})})]})]})]}),$==="phase3"&&e.jsxs("div",{className:"lesson-layout",children:[e.jsxs("aside",{className:"activity-list",children:[e.jsx("button",{className:`activity ${le==="a1"?"active":""}`,onClick:()=>Ae("a1"),children:"Activity 1"}),e.jsx("button",{className:`activity ${le==="a2"?"active":""}`,onClick:()=>Ae("a2"),children:"Activity 2"})]}),e.jsxs("section",{className:"activity-panel",children:[le==="a1"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 1: Relating Findings to Real-World"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=z(),t=g(),a=Object.keys(s).map(i=>({username:i,data:t[i]?.phaseData?.[3]||{}}));v(a,"lesson2_phase3_activity1.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 1: Relating Findings to Real-World"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students complete the critical analysis worksheet."]}),e.jsx("div",{style:{marginTop:8,display:"flex",justifyContent:"flex-end"},children:e.jsxs("select",{className:"class-filter",value:ce,onChange:s=>ke(s.target.value),children:[e.jsx("option",{value:"",children:"All Students"}),Object.keys(z()).slice().sort((s,t)=>s.split(" ").slice(-1)[0].localeCompare(t.split(" ").slice(-1)[0])).map(s=>e.jsx("option",{value:s,children:s},s))]})}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"45%"},children:"Question / Prompt"}),e.jsx("th",{children:"Student Answer"})]})}),e.jsx("tbody",{children:(()=>{const s=g(),t=z(),a=Object.keys(t).sort((r,o)=>r.split(" ").slice(-1)[0].localeCompare(o.split(" ").slice(-1)[0])),i=ce||a[0],n=i?s[i]?.phaseData?.[3]||{}:{},l=n.lesson2&&n.lesson2.activity1?n.lesson2.activity1:{};return[["PART 1: What Your Data Shows",""],["A. Our Research Question:",l.part1_researchQuestion||""],["B. Our Regression Line Equation:",l.part1_r||""],["C. Our Interpretation:",l.part1_interp||""],["PART 2: Explaining the Pattern",""],["A. Possible Explanation 1:",l.part2_exp1||""],["Evidence supporting this:",l.part2_evid1||""],["Possible Explanation 2:",l.part2_exp2||""],["Evidence supporting this:",l.part2_evid2||""],["B. Which explanation seems most plausible? Why?",l.part2_plausible||""],["PART 3: What Your Data DOESN'T Show",""],["A. Yes, because",l.part3_because&&l.part3_because.startsWith("Yes")?l.part3_because:""],["A. No, because",l.part3_because&&l.part3_because.startsWith("No")?l.part3_because:""],["B. What other factors might influence this prediction?",[l.part3_factor1,l.part3_factor2].filter(Boolean).join(`
`)],["PART 4: Data Quality and Limitations",""],["A. My biggest concern about data reliability:",l.part4_concern||""],["B. How does this limitation affect my confidence in the findings?",l.part4_confidence||""]].map((r,o)=>e.jsxs("tr",{children:[e.jsx("td",{style:{whiteSpace:"pre-wrap",textAlign:"left"},children:r[0]}),e.jsx("td",{style:{whiteSpace:"pre-wrap"},children:r[1]})]},o))})()})]})})]}),le==="a2"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 2: Evaluating Relevance of Information to Stakeholders"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=G(),t=g(),a=Object.keys(s).map(i=>({username:i,state:t[i]?.phaseData?.[3]||{}}));v(a,"lesson2_phase3_activity2.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 2: Evaluating Relevance of Information to Stakeholders"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students complete the stakeholder analysis worksheet."]}),e.jsx("div",{style:{marginTop:8,display:"flex",justifyContent:"flex-end"},children:e.jsxs("select",{className:"class-filter",value:ce,onChange:s=>ke(s.target.value),children:[e.jsx("option",{value:"",children:"All Students"}),Object.keys(G()).slice().sort((s,t)=>s.split(" ").slice(-1)[0].localeCompare(t.split(" ").slice(-1)[0])).map(s=>e.jsx("option",{value:s,children:s},s))]})}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"45%"},children:"Question / Prompt"}),e.jsx("th",{children:"Student Answer"})]})}),e.jsx("tbody",{children:(()=>{const s=g(),t=G(),a=Object.keys(t).sort((r,o)=>r.split(" ").slice(-1)[0].localeCompare(o.split(" ").slice(-1)[0])),i=ce||a[0];i&&s[i]?.phaseData?.[3];const n=i?s[i]?.phaseData?.[3]||{}:{},l=n.lesson2&&n.lesson2.activity2?n.lesson2.activity2:{};return[["PART 1: Identify Potential Stakeholders",""],["1.",l.sa_stakeholders&&l.sa_stakeholders[0]?l.sa_stakeholders[0]:""],["2.",l.sa_stakeholders&&l.sa_stakeholders[1]?l.sa_stakeholders[1]:""],["3.",l.sa_stakeholders&&l.sa_stakeholders[2]?l.sa_stakeholders[2]:""],["PART 2: Why It Matters to Them",""],["The understanding of this influence matters to",l.sa_matters_to||""],["because",l.sa_because||""],["PART 3: Current Decisions This Affects",""],["Decisions affected:",[l.sa_decisions&&l.sa_decisions[0]?l.sa_decisions[0]:"",l.sa_decisions&&l.sa_decisions[1]?l.sa_decisions[1]:""].filter(Boolean).join(`
`)]].map((r,o)=>e.jsxs("tr",{children:[e.jsx("td",{style:{whiteSpace:"pre-wrap",textAlign:"left"},children:r[0]}),e.jsx("td",{style:{whiteSpace:"pre-wrap"},children:r[1]})]},o))})()})]})})]})]})]}),$==="phase4"&&e.jsxs("div",{className:"lesson-layout",children:[e.jsx("aside",{className:"activity-list",children:e.jsx("button",{className:`activity ${De==="a1"?"active":""}`,onClick:()=>Ke("a1"),children:"Activity 1"})}),e.jsx("section",{className:"activity-panel",children:De==="a1"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Our Evidence-Based Recommendation (Initial)"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=M(),t=g(),a=Object.keys(s).map(i=>({username:i,state:t[i]?.phaseData?.[3]||{}}));v(a,"lesson2_phase4_activity1.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Our Evidence-Based Recommendation (Initial)"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students submit their initial recommendations."]}),e.jsx("div",{style:{marginTop:8,display:"flex",justifyContent:"flex-end"},children:e.jsxs("select",{className:"class-filter",value:L,onChange:s=>Xe(s.target.value),children:[e.jsx("option",{value:"",children:"All Students"}),Object.keys(M()).slice().sort((s,t)=>s.split(" ").slice(-1)[0].localeCompare(t.split(" ").slice(-1)[0])).map(s=>e.jsx("option",{value:s,children:s},s))]})}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("div",{style:{aspectRatio:"16/9",background:"#f6f7fb",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},children:(()=>{const s=ys(),t=L?s[L]:null,a=t?.uploadUrl||t?.file||t?.pdf||"";return a?e.jsx("iframe",{src:a,style:{width:"100%",height:"100%",border:"none",borderRadius:6}}):"Preview frame (student upload preview)"})()}),e.jsxs("div",{style:{marginTop:16,padding:12,borderRadius:8,background:"#fff",boxShadow:"0 1px 2px rgba(0,0,0,0.04)"},children:[e.jsx("h4",{style:{margin:"6px 0 12px 0"},children:"Teacher Scoring Rubric"}),(()=>{const s=[{key:"calculation",label:"CALCULATION ACCURACY",options:["R value, R2 value, and regression line equation are incorrect, or calculation process has major errors","R value, R2 value, and regression line equation correctly calculated using appropriate method; minor errors in process","R value, R2 value, and regression line equation calculated both manually and digitally with verification; all steps shown accurately"]},{key:"interpretation",label:"INTERPRETATION",options:["Misidentifies strength or direction; interpretation unclear","Correctly identifies strength and direction; explains meaning in context","Thorough interpretation with nuanced understanding; connects to climate patterns effectively"]},{key:"pattern",label:"PATTERN ANALYSIS",options:["Patterns not clearly identified; limited use of visual/numerical evidence","Patterns identified and described using scatter plot and r value","Sophisticated pattern analysis; discusses seasonal variations, outliers, or subgroup differences"]},{key:"reliability",label:"DATA RELIABILITY EVALUATION",options:["No discussion of limitations or data quality","Acknowledges at least 2 limitations (sample size, time period, missing variables)","Critical evaluation of data quality with specific implications for confidence in findings"]},{key:"evidence",label:"EVIDENCE-BASED CONCLUSIONS",options:["Conclusions not clearly supported by data; confuses correlation with causation","Conclusions logically follow from data; distinguishes between correlation and causation","Nuanced conclusions acknowledging what data does and does not show; considers alternative explanations"]},{key:"recommendation",label:"ACTIONABLE RECOMMENDATION",options:["No clear recommendation OR recommendation not connected to finding","Specific, stakeholder-focused recommendation with clear justification","Highly actionable recommendation with detailed implementation guidance; addresses potential challenges"]},{key:"communication",label:"COMMUNICATION CLARITY",options:["Output disorganized; findings unclear; poor visual/written presentation","Clear organization; findings communicated effectively; appropriate visuals","Professional-quality output; compelling presentation; excellent integration of text, data, visuals"]},{key:"reflection",label:"REFLECTION ON PROCESS",options:["Minimal reflection on assumptions, uncertainties, or learning","Reflects on analytical assumptions and uncertainties; identifies learning growth","Deep metacognitive reflection; discusses how experience changed understanding of statistics and climate"]}],t=["Below Proficient","Proficient","Advanced"],a=[2,3,4],i=(l,c)=>{const r=X.slice();r[l]=c,Ze(r)},n=X.reduce((l,c)=>l+(a[c]||0),0);return e.jsxs("div",{children:[e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"left",padding:6},children:"Criterion"}),e.jsx("th",{style:{padding:6},children:"Dropdown option"}),e.jsx("th",{style:{padding:6},children:"Interpretation"}),e.jsx("th",{style:{padding:6},children:"Score"})]})}),e.jsxs("tbody",{children:[s.map((l,c)=>e.jsxs("tr",{style:{borderTop:"1px solid #eee"},children:[e.jsx("td",{style:{padding:8,verticalAlign:"top",width:"22%"},children:e.jsx("strong",{children:l.label})}),e.jsx("td",{style:{padding:8,width:"48%"},children:e.jsx("select",{className:"scoring-select",value:X[c],onChange:r=>i(c,Number(r.target.value)),children:l.options.map((r,o)=>e.jsx("option",{value:o,children:r},o))})}),e.jsx("td",{style:{padding:8,width:"18%"},children:t[X[c]]}),e.jsx("td",{style:{padding:8,width:"12%",textAlign:"center"},children:a[X[c]]})]},l.key)),e.jsxs("tr",{children:[e.jsx("td",{colSpan:2,style:{padding:8,fontWeight:700},children:"Total"}),e.jsx("td",{style:{padding:8}}),e.jsx("td",{style:{padding:8,textAlign:"center",fontWeight:800},children:n})]})]})]}),e.jsxs("div",{style:{marginTop:12,display:"flex",gap:12,alignItems:"center"},children:[e.jsx("button",{className:"record-score-btn",onClick:()=>{if(!L){alert("Select a student before recording score");return}const l=L;try{const c=localStorage.getItem("teacherFeedback"),r=c?JSON.parse(c):{};r[l]=r[l]||{},r[l].lesson2=r[l].lesson2||{},r[l].lesson2.phaseScores={...r[l].lesson2.phaseScores||{},4:n},localStorage.setItem("teacherFeedback",JSON.stringify(r))}catch{}alert("Score recorded for "+L+": "+n)},children:"Record Score"}),e.jsx("div",{style:{color:"#374151",fontWeight:700},children:(()=>{if(!L)return"";const c=_.flatMap(r=>r.students).find(r=>r.username===L);return c?`${c.name} (${c.username})`:L})()})]})]})})()]})]})]})})]})]})]}),A==="lesson3"&&e.jsxs("div",{className:"subpage",children:[e.jsx("div",{className:"subpage-header",children:e.jsx("h3",{className:"subpage-title",children:"Lesson 3: Climate Predictions and Applications in Regression"})}),e.jsxs("div",{className:"lesson-phases",children:[e.jsxs("div",{className:"phase-tabs",children:[e.jsx("button",{className:`phase ${E==="phase1"?"active":""}`,onClick:()=>re("phase1"),children:"Phase 1"}),e.jsx("button",{className:`phase ${E==="phase2"?"active":""}`,onClick:()=>re("phase2"),children:"Phase 2"}),e.jsx("button",{className:`phase ${E==="phase3"?"active":""}`,onClick:()=>re("phase3"),children:"Phase 3"}),e.jsx("button",{className:`phase ${E==="phase4"?"active":""}`,onClick:()=>re("phase4"),children:"Phase 4"})]}),E==="phase1"&&e.jsxs("div",{className:"lesson-layout",children:[e.jsxs("aside",{className:"activity-list",children:[e.jsx("button",{className:`activity ${oe==="activity1"?"active":""}`,onClick:()=>Pe("activity1"),children:"Activity 1"}),e.jsx("button",{className:`activity ${oe==="activity2"?"active":""}`,onClick:()=>Pe("activity2"),children:"Activity 2"})]}),e.jsxs("section",{className:"activity-panel",children:[oe==="activity1"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 1a: Climate Change Observation (Scenarios)"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=d.slice().sort((t,a)=>t.name.split(" ").slice(-1)[0].toLowerCase().localeCompare(a.name.split(" ").slice(-1)[0].toLowerCase())).map(t=>({name:t.name,researchQuestion:"",regressionEquation:"",interpretation:""}));v(s,"lesson3_activity1.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 1a: Climate Change Observation (Scenarios)"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students review and summarize the key elements of their research, including their variables, research question, regression equation, and what that equation means in the context of their study."]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Research Question"}),e.jsx("th",{children:"Regression Line Equation"}),e.jsx("th",{children:"Interpretation"})]})}),e.jsx("tbody",{children:(()=>{const s=bs();return d.slice().sort((t,a)=>t.name.split(" ").slice(-1)[0].toLowerCase().localeCompare(a.name.split(" ").slice(-1)[0].toLowerCase())).map(t=>{const a=s[t.username]||{researchQuestion:"",regressionEquation:"",interpretation:""};return e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{children:a.researchQuestion||""}),e.jsx("td",{children:a.regressionEquation||""}),e.jsx("td",{children:a.interpretation||""})]},t.id)})})()})]})})]}),oe==="activity2"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 2: Identifying Confounding Variables"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=d.slice().sort((t,a)=>t.name.split(" ").slice(-1)[0].toLowerCase().localeCompare(a.name.split(" ").slice(-1)[0].toLowerCase())).map(t=>({name:t.name,considerations:""}));v(s,"lesson3_activity2.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 2: Identifying Confounding Variables"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students collaborate with their group to identify other possible factors beyond their independent variable that could influence their dependent variable."]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginBottom:8},children:e.jsxs("select",{value:Re,onChange:s=>es(s.target.value),className:"class-filter",children:[e.jsx("option",{value:"",children:"All Students"}),d.slice().sort((s,t)=>s.name.split(" ").slice(-1)[0].toLowerCase().localeCompare(t.name.split(" ").slice(-1)[0].toLowerCase())).map(s=>e.jsx("option",{value:s.username,children:s.name},s.id))]})}),e.jsx("div",{style:{aspectRatio:"16/9",background:"#f6f7fb",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:12},children:(()=>{const s=Ye(),t=Re||d[0]?.username||"",i=(t?s[t]:null)?.fileDataUrl||"";return i?e.jsx("iframe",{src:i,style:{width:"100%",height:"100%",border:"none",borderRadius:6}}):"Preview frame (student upload preview)"})()}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Considerations"})]})}),e.jsx("tbody",{children:(()=>{const s=Ye();return d.slice().sort((t,a)=>t.name.split(" ").slice(-1)[0].toLowerCase().localeCompare(a.name.split(" ").slice(-1)[0].toLowerCase())).map(t=>{const a=s[t.username]||{considerations:""};return e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{children:a.considerations||""})]},t.id)})})()})]})})]})]})]}),E==="phase2"&&e.jsxs("div",{className:"lesson-layout",children:[e.jsxs("aside",{className:"activity-list",children:[e.jsx("button",{className:`activity ${Q==="activity1"?"active":""}`,onClick:()=>xe("activity1"),children:"Activity 1"}),e.jsx("button",{className:`activity ${Q==="activity2"?"active":""}`,onClick:()=>xe("activity2"),children:"Activity 2"}),e.jsx("button",{className:`activity ${Q==="activity3"?"active":""}`,onClick:()=>xe("activity3"),children:"Activity 3"})]}),e.jsxs("section",{className:"activity-panel",children:[Q==="activity1"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 1: Making Predictions Within Your Data Range"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=d.slice().sort((t,a)=>t.name.split(" ").slice(-1)[0].toLowerCase().localeCompare(a.name.split(" ").slice(-1)[0].toLowerCase())).map(t=>({name:t.name,username:t.username,note:""}));v(s,"lesson3_phase2_activity1.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 1: Making Predictions Within Your Data Range"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students use their regression equation to predict dependent variable values for independent variable values that fall within the range of their collected data."]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginBottom:8},children:e.jsxs("select",{value:J,onChange:s=>je(s.target.value),className:"class-filter",children:[e.jsx("option",{value:"",children:"All Students"}),d.slice().sort((s,t)=>s.name.split(" ").slice(-1)[0].toLowerCase().localeCompare(t.name.split(" ").slice(-1)[0].toLowerCase())).map(s=>e.jsx("option",{value:s.username,children:s.name},s.id))]})}),e.jsx("div",{style:{aspectRatio:"16/9",background:"#f6f7fb",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:12},children:(()=>{const s=gs(),t=J||d[0]?.username||"",i=(t?s[t]:null)?.fileDataUrl||"";return i?e.jsx("iframe",{src:i,style:{width:"100%",height:"100%",border:"none",borderRadius:6}}):"Preview frame (student upload preview)"})()})]}),Q==="activity2"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 2: Making Predictions Beyond Your Data Range"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=d.slice().sort((t,a)=>t.name.split(" ").slice(-1)[0].toLowerCase().localeCompare(a.name.split(" ").slice(-1)[0].toLowerCase())).map(t=>({name:t.name,username:t.username,note:""}));v(s,"lesson3_phase2_activity2.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 2: Making Predictions Beyond Your Data Range"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students use their regression equation to predict dependent variable values for independent variable values that fall outside the range of their collected data."]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginBottom:8},children:e.jsxs("select",{value:J,onChange:s=>je(s.target.value),className:"class-filter",children:[e.jsx("option",{value:"",children:"All Students"}),d.slice().sort((s,t)=>s.name.split(" ").slice(-1)[0].toLowerCase().localeCompare(t.name.split(" ").slice(-1)[0].toLowerCase())).map(s=>e.jsx("option",{value:s.username,children:s.name},s.id))]})}),e.jsx("div",{style:{aspectRatio:"16/9",background:"#f6f7fb",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:12},children:(()=>{const s=fs(),t=Ee(),a=J||d[0]?.username||"",i=a?s[a]:null,n=i&&i.fileDataUrl||"",l=i&&i.filename||"",c=t&&t[a]&&t[a].answer||"";return e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{flex:1,minHeight:0},children:n?e.jsx("iframe",{src:n,style:{width:"100%",height:"100%",border:"none",borderRadius:6}}):"Preview frame (student upload preview)"}),e.jsxs("div",{style:{marginTop:8,padding:8,background:"#fff",borderRadius:6,border:"1px solid #e6e9ef"},children:[e.jsx("div",{style:{fontWeight:700,marginBottom:6},children:"Selected student data"}),e.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Filename:"})," ",l||""]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Encoded answer:"})," ",c||""]})]})]})]})})()})]}),Q==="activity3"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Activity 3: Determining the Strength of Your Model"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=d.slice().sort((t,a)=>t.name.split(" ").slice(-1)[0].toLowerCase().localeCompare(a.name.split(" ").slice(-1)[0].toLowerCase())).map(t=>({name:t.name,username:t.username,r2:""}));v(s,"lesson3_phase2_activity3.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Activity 3: Determining the Strength of Your Model"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students calculate the coefficient of determination (R) to measure how well their regression line explains the variation in their dependent variable."]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginBottom:8},children:e.jsxs("select",{value:J,onChange:s=>je(s.target.value),className:"class-filter",children:[e.jsx("option",{value:"",children:"All Students"}),d.slice().sort((s,t)=>s.name.split(" ").slice(-1)[0].toLowerCase().localeCompare(t.name.split(" ").slice(-1)[0].toLowerCase())).map(s=>e.jsx("option",{value:s.username,children:s.name},s.id))]})}),e.jsx("div",{style:{aspectRatio:"16/9",background:"#f6f7fb",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:12},children:(()=>{const s=Qe(),t=J||d[0]?.username||"",i=(t?s[t]:null)?.fileDataUrl||"";return i?e.jsx("iframe",{src:i,style:{width:"100%",height:"100%",border:"none",borderRadius:6}}):"Preview frame (student upload preview)"})()}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"R Interpretation"})]})}),e.jsx("tbody",{children:d.slice().sort((s,t)=>s.name.split(" ").slice(-1)[0].toLowerCase().localeCompare(t.name.split(" ").slice(-1)[0].toLowerCase())).map(s=>{const a=Qe()[s.username]||{interpretation:""};return e.jsxs("tr",{children:[e.jsx("td",{children:s.name}),e.jsx("td",{children:a.interpretation||""})]},s.id)})})]})})]})]})]}),E==="phase3"&&e.jsxs("div",{className:"lesson-layout",children:[e.jsx("aside",{className:"activity-list",children:e.jsx("button",{className:"activity active",onClick:()=>{},children:"Activity 1"})}),e.jsx("section",{className:"activity-panel",children:e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Finalized Evidence-Based Recommendations"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=M(),t=d.slice().sort((a,i)=>a.name.split(" ").slice(-1)[0].toLowerCase().localeCompare(i.name.split(" ").slice(-1)[0].toLowerCase())).map(a=>({name:a.name,username:a.username,recommendation:s[a.username]?.recommendation||""}));v(t,"lesson3_phase3_activity1.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Finalized Evidence-Based Recommendations"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students revisit their initial recommendation from Lesson 2 and improve it by incorporating their understanding of correlation strength and how much of the variation your model explains."]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginBottom:8},children:e.jsxs("select",{value:Ie,onChange:s=>ss(s.target.value),className:"class-filter",children:[e.jsx("option",{value:"",children:"All Students"}),d.slice().sort((s,t)=>s.name.split(" ").slice(-1)[0].toLowerCase().localeCompare(t.name.split(" ").slice(-1)[0].toLowerCase())).map(s=>e.jsx("option",{value:s.username,children:s.name},s.id))]})}),e.jsx("div",{style:{aspectRatio:"16/9",background:"#f6f7fb",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:12},children:(()=>{const s=Ns(),t=M(),a=g(),i=Ie||d[0]?.username||"",n=i?s[i]||t[i]||a[i]||{}:null,l=n?.fileDataUrl||n?.file||n?.pdf||n?.uploadUrl||n?.lesson3?.phase3?.file||"";return l?e.jsx("iframe",{src:l,style:{width:"100%",height:"100%",border:"none",borderRadius:6}}):"Preview frame (student upload preview)"})()})]})})]}),E==="phase4"&&e.jsxs("div",{className:"lesson-layout",children:[e.jsxs("aside",{className:"activity-list",children:[e.jsx("button",{className:`activity ${H==="act1"?"active":""}`,onClick:()=>ve("act1"),children:"Activity 1"}),e.jsx("button",{className:`activity ${H==="act2"?"active":""}`,onClick:()=>ve("act2"),children:"Activity 2"}),e.jsx("button",{className:`activity ${H==="act3"?"active":""}`,onClick:()=>ve("act3"),children:"Activity 3"})]}),e.jsxs("section",{className:"activity-panel",children:[H==="act1"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Peer Review: Quality Check Before Submission"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=te(),a=Object.keys(s).slice().sort((i,n)=>i.split(" ").slice(-1)[0].localeCompare(n.split(" ").slice(-1)[0])).map(i=>({username:i,data:s[i]?.review||{}}));v(a,"lesson3_phase4_peerreview.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Peer Review: Quality Check Before Submission"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students ask their peers to review their Lesson 3 output before submission."]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:e.jsxs("select",{className:"class-filter",children:[e.jsx("option",{children:"All Students (who submitted)"}),Object.keys(te()).slice().sort((s,t)=>s.split(" ").slice(-1)[0].localeCompare(t.split(" ").slice(-1)[0])).map(s=>e.jsx("option",{children:s},s))]})}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"45%"},children:"Prompt"}),e.jsx("th",{children:"Student Answer"})]})}),e.jsx("tbody",{children:(()=>{const s=te(),a=Object.keys(s).slice().sort((l,c)=>l.split(" ").slice(-1)[0].localeCompare(c.split(" ").slice(-1)[0]))[0],i=a?s[a]?.review||{}:{};return[["1. CLARITY: Can you understand their finding and recommendation without asking questions?",Array.isArray(i.q1)?i.q1.join(", "):i.q1||""],["2. EVIDENCE: Is their recommendation clearly supported by their r value and interpretation?",Array.isArray(i.q2)?i.q2.join(", "):i.q2||""],["3. ACTIONABILITY: Could a stakeholder actually implement this recommendation?",Array.isArray(i.q3)?i.q3.join(", "):i.q3||""],["4. HONESTY: Did they acknowledge limitations of their data?",Array.isArray(i.q4)?i.q4.join(", "):i.q4||""],["ONE STRENGTH of their work:",i.strength||""],["ONE SUGGESTION for improvement:",i.suggestion||""],["Username of Peer reviewer:",i.peerReviewer||""]].map((l,c)=>e.jsxs("tr",{children:[e.jsx("td",{style:{whiteSpace:"pre-wrap",textAlign:"left"},children:l[0]}),e.jsx("td",{style:{whiteSpace:"pre-wrap"},children:l[1]})]},c))})()})]})})]}),H==="act2"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Reflection and Final Submission"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=W(),a=Object.keys(s).slice().sort((i,n)=>i.split(" ").slice(-1)[0].localeCompare(n.split(" ").slice(-1)[0])).map(i=>({username:i,data:s[i]||{}}));v(a,"lesson3_phase4_reflection.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Reflection and Final Submission"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students reflect on their Lesson 3 journey."]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:e.jsxs("select",{value:O,onChange:s=>Oe(s.target.value),className:"class-filter",children:[e.jsx("option",{value:"",children:"All Students (who completed)"}),Object.keys(W()).slice().sort((s,t)=>s.split(" ").slice(-1)[0].localeCompare(t.split(" ").slice(-1)[0])).map(s=>e.jsx("option",{value:s,children:s},s))]})}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"45%"},children:"Prompt"}),e.jsx("th",{children:"Student Answer"})]})}),e.jsx("tbody",{children:(()=>{const s=W(),t=Object.keys(s).slice().sort((l,c)=>l.split(" ").slice(-1)[0].localeCompare(c.split(" ").slice(-1)[0])),a=O||t[0],i=a?s[a]||{}:{};return[["1. How confident am I in my correlation calculation?",i.reflection?.confidence||""],["2. What contributed to this confidence level?",i.reflection?.contributed||""],["3. What was most challenging about this project?",i.reflection?.challenging||""],["4a. Statistics:",i.reflection?.stats||""],["4b. Climate:",i.reflection?.climate||""],["4c. The connection between them:",i.reflection?.connection||""],["5. If I could extend this project, I would investigate:",i.reflection?.extend||""],["6. One thing I learned about myself as a learner:",i.reflection?.learned||""]].map((l,c)=>e.jsxs("tr",{children:[e.jsx("td",{style:{whiteSpace:"pre-wrap",textAlign:"left"},children:l[0]}),e.jsx("td",{style:{whiteSpace:"pre-wrap"},children:l[1]})]},c))})()})]})})]}),H==="act3"&&e.jsxs("div",{children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("h4",{className:"activity-title",style:{fontWeight:700,textAlign:"left"},children:"Final Output Submission"}),e.jsxs("div",{className:"activity-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>{const s=W(),a=Object.keys(s).slice().sort((i,n)=>i.split(" ").slice(-1)[0].localeCompare(n.split(" ").slice(-1)[0])).map(i=>({username:i,data:s[i]||{}}));v(a,"lesson3_phase4_submission.csv")},className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Final Output Submission"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsxs("p",{className:"activity-desc",children:["Description: ",e.jsx("br",{})," In this activity, students submit their final outputs depending on the type or format they chose."]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:e.jsxs("select",{value:O,onChange:s=>Oe(s.target.value),className:"class-filter",children:[e.jsx("option",{value:"",children:"All Students (who completed)"}),Object.keys(W()).slice().sort((s,t)=>s.split(" ").slice(-1)[0].localeCompare(t.split(" ").slice(-1)[0])).map(s=>e.jsx("option",{value:s,children:s},s))]})}),e.jsx("div",{style:{aspectRatio:"16/9",background:"#f6f7fb",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},children:(()=>{const s=W(),t=O||Object.keys(s)[0]||"",i=(t?s[t]||{}:{})?.uploadUrl||"";return i?e.jsx("iframe",{src:i,style:{width:"100%",height:"100%",border:"none",borderRadius:6}}):"Preview frame (student upload preview)"})()}),e.jsxs("div",{style:{marginTop:16,padding:12,borderRadius:8,background:"#fff",boxShadow:"0 1px 2px rgba(0,0,0,0.04)"},children:[e.jsx("h4",{style:{margin:"6px 0 12px 0"},children:"Teacher Scoring Rubric (Lesson 3)"}),(()=>{const s=[{key:"calculation",label:"CALCULATION ACCURACY",options:["R value, R2 value, and regression line equation are incorrect, or calculation process has major errors","R value, R2 value, and regression line equation correctly calculated using appropriate method; minor errors in process","R value, R2 value, and regression line equation calculated both manually and digitally with verification; all steps shown accurately"]},{key:"interpretation",label:"INTERPRETATION",options:["Misidentifies strength or direction; interpretation unclear","Correctly identifies strength and direction; explains meaning in context","Thorough interpretation with nuanced understanding; connects to climate patterns effectively"]},{key:"pattern",label:"PATTERN ANALYSIS",options:["Patterns not clearly identified; limited use of visual/numerical evidence","Patterns identified and described using scatter plot and r value","Sophisticated pattern analysis; discusses seasonal variations, outliers, or subgroup differences"]},{key:"reliability",label:"DATA RELIABILITY EVALUATION",options:["No discussion of limitations or data quality","Acknowledges at least 2 limitations (sample size, time period, missing variables)","Critical evaluation of data quality with specific implications for confidence in findings"]},{key:"evidence",label:"EVIDENCE-BASED CONCLUSIONS",options:["Conclusions not clearly supported by data; confuses correlation with causation","Conclusions logically follow from data; distinguishes between correlation and causation","Nuanced conclusions acknowledging what data does and does not show; considers alternative explanations"]},{key:"recommendation",label:"ACTIONABLE RECOMMENDATION",options:["No clear recommendation OR recommendation not connected to finding","Specific, stakeholder-focused recommendation with clear justification","Highly actionable recommendation with detailed implementation guidance; addresses potential challenges"]},{key:"communication",label:"COMMUNICATION CLARITY",options:["Output disorganized; findings unclear; poor visual/written presentation","Clear organization; findings communicated effectively; appropriate visuals","Professional-quality output; compelling presentation; excellent integration of text, data, visuals"]},{key:"reflection",label:"REFLECTION ON PROCESS",options:["Minimal reflection on assumptions, uncertainties, or learning","Reflects on analytical assumptions and uncertainties; identifies learning growth","Deep metacognitive reflection; discusses how experience changed understanding of statistics and climate"]}],t=["Below Proficient","Proficient","Advanced"],a=[2,3,4],i=(l,c)=>{const r=Z.slice();r[l]=c,ts(r)},n=Z.reduce((l,c)=>l+(a[c]||0),0);return e.jsxs("div",{children:[e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"left",padding:6},children:"Criterion"}),e.jsx("th",{style:{padding:6},children:"Dropdown option"}),e.jsx("th",{style:{padding:6},children:"Interpretation"}),e.jsx("th",{style:{padding:6},children:"Score"})]})}),e.jsxs("tbody",{children:[s.map((l,c)=>e.jsxs("tr",{style:{borderTop:"1px solid #eee"},children:[e.jsx("td",{style:{padding:8,verticalAlign:"top",width:"22%"},children:e.jsx("strong",{children:l.label})}),e.jsx("td",{style:{padding:8,width:"48%"},children:e.jsx("select",{className:"scoring-select",value:Z[c],onChange:r=>i(c,Number(r.target.value)),children:l.options.map((r,o)=>e.jsx("option",{value:o,children:r},o))})}),e.jsx("td",{style:{padding:8,width:"18%"},children:t[Z[c]]}),e.jsx("td",{style:{padding:8,width:"12%",textAlign:"center"},children:a[Z[c]]})]},l.key)),e.jsxs("tr",{children:[e.jsx("td",{colSpan:2,style:{padding:8,fontWeight:700},children:"Total"}),e.jsx("td",{style:{padding:8}}),e.jsx("td",{style:{padding:8,textAlign:"center",fontWeight:800},children:n})]})]})]}),e.jsxs("div",{style:{marginTop:12,display:"flex",gap:12,alignItems:"center"},children:[e.jsx("button",{className:"record-score-btn",onClick:()=>{if(!O){alert("Select a student before recording score");return}const l=O;try{const c=localStorage.getItem("teacherFeedback"),r=c?JSON.parse(c):{};r[l]=r[l]||{},r[l].lesson3=r[l].lesson3||{},r[l].lesson3.phaseScores={...r[l].lesson3.phaseScores||{},3:n},localStorage.setItem("teacherFeedback",JSON.stringify(r))}catch{}alert("Score recorded for "+O+": "+n)},children:"Record Score"}),e.jsx("div",{style:{color:"#374151",fontWeight:700},children:(()=>{if(!O)return"";const c=_.flatMap(r=>r.students).find(r=>r.username===O);return c?`${c.name} (${c.username})`:O})()})]})]})})()]})]})]})]})]})]}),A==="post"&&e.jsxs("div",{className:"subpage",children:[e.jsxs("div",{className:"subpage-header",children:[e.jsx("h3",{className:"subpage-title",children:"Post Assessment Results"}),e.jsxs("div",{className:"subpage-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"download-group",children:[e.jsx("button",{onClick:()=>v(w),className:"download-btn",children:"Download CSV"}),e.jsx("button",{onClick:()=>y("Post Assessment Results"),className:"download-btn",children:"Download PDF"})]})]})]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Username"}),Array.from({length:15},(s,t)=>e.jsxs("th",{children:["Q",t+1]},t)),e.jsx("th",{children:"Score"})]})}),e.jsxs("tbody",{children:[w.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:17,style:{textAlign:"center",padding:"18px"},children:"No students found for selected class."})}),w.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.name}),e.jsx("td",{children:s.username}),s.answers.map((t,a)=>e.jsx("td",{children:t},a)),e.jsx("td",{children:s.score})]},s.id))]})]})})]}),A==="classRecord"&&e.jsxs("div",{className:"subpage class-record",children:[e.jsxs("div",{className:"subpage-header",children:[e.jsx("h3",{className:"subpage-title",children:"Class Record"}),e.jsxs("div",{className:"subpage-controls",children:[e.jsx("select",{value:u,onChange:s=>x(s.target.value),className:"class-filter",children:j.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsx("div",{className:"download-group",children:e.jsx("button",{onClick:()=>{const s=d,t=F();let a={};try{a=JSON.parse(localStorage.getItem("teacherFeedback")||"{}")||{}}catch{a={}}const i=g(),n=s.map(h=>{const p=h.username,C=t[p]&&typeof t[p].prePart1Correct=="number"?String(t[p].prePart1Correct):"",N=t[p]&&typeof t[p].postPart1Correct=="number"?String(t[p].postPart1Correct):"";let S="";try{const se=a?.[p]?.lesson1?.phaseScores?.[4];if(typeof se=="number")S=String(se);else{const be=i[p]?.phaseData?.[4];be&&typeof be.teacherScore=="number"&&(S=String(be.teacherScore))}}catch{S=""}const ee=a?.[p]?.lesson2?.phaseScores?.[4]&&typeof a[p].lesson2.phaseScores[4]=="number"?String(a[p].lesson2.phaseScores[4]):"",ye=a?.[p]?.lesson3?.phaseScores?.[3]&&typeof a[p].lesson3.phaseScores[3]=="number"?String(a[p].lesson3.phaseScores[3]):"";return{name:Le(h.name),username:p,pre:C,l1:S,l2:ee,l3:ye,post:N}}),c=[["Name of Student","Username","Pre-Assessment","Lesson 1 Final Output","Lesson 2 Final Output","Lesson 3 Final Output","Post Assessment"].join(",")];n.forEach(h=>{const p=[h.name,h.username,h.pre,h.l1,h.l2,h.l3,h.post].map(C=>`"${String(C||"").replace(/"/g,'""')}"`).join(",");c.push(p)});const r=new Blob([c.join(`
`)],{type:"text/csv"}),o=URL.createObjectURL(r),m=document.createElement("a");m.href=o,m.download=`class-record-${u}.csv`,m.click(),URL.revokeObjectURL(o)},className:"download-btn",children:"Download CSV"})})]})]}),e.jsx("div",{className:"table-wrap",children:e.jsxs("table",{className:"results-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"center"},children:"Name of Student"}),e.jsx("th",{style:{textAlign:"center"},children:"Pre-Assessment"}),e.jsx("th",{style:{textAlign:"center"},children:"Lesson 1 Final Output"}),e.jsx("th",{style:{textAlign:"center"},children:"Lesson 2 Final Output"}),e.jsx("th",{style:{textAlign:"center"},children:"Lesson 3 Final Output"}),e.jsx("th",{style:{textAlign:"center"},children:"Post Assessment"})]})}),e.jsx("tbody",{children:d.map(s=>{const t=s.username,a=F(),i=a[t]&&typeof a[t].prePart1Correct=="number"?String(a[t].prePart1Correct):"",n=a[t]&&typeof a[t].postPart1Correct=="number"?String(a[t].postPart1Correct):"";let l="";try{const m=localStorage.getItem("teacherFeedback"),p=(m?JSON.parse(m||"{}"):{})?.[t]?.lesson1?.phaseScores?.[4];if(typeof p=="number")l=String(p);else{const N=g()[t]?.phaseData?.[4];N&&typeof N.teacherScore=="number"&&(l=String(N.teacherScore))}}catch{l=""}let c="";try{const m=localStorage.getItem("teacherFeedback"),h=m?JSON.parse(m||"{}"):{};h?.[t]?.lesson2?.phaseScores?.[4]&&typeof h[t].lesson2.phaseScores[4]=="number"&&(c=String(h[t].lesson2.phaseScores[4]))}catch{c=""}let r="";try{const m=localStorage.getItem("teacherFeedback"),h=m?JSON.parse(m||"{}"):{};h?.[t]?.lesson3?.phaseScores?.[3]&&typeof h[t].lesson3.phaseScores[3]=="number"&&(r=String(h[t].lesson3.phaseScores[3]))}catch{r=""}const o=Le(s.name);return e.jsxs("tr",{children:[e.jsx("td",{style:{textAlign:"left"},children:o}),e.jsx("td",{style:{textAlign:"center"},children:i}),e.jsx("td",{style:{textAlign:"center"},children:l}),e.jsx("td",{style:{textAlign:"center"},children:c}),e.jsx("td",{style:{textAlign:"center"},children:r}),e.jsx("td",{style:{textAlign:"center"},children:n})]},t)})})]})})]})]})]})};export{ks as P};
